---
title: "Benchmarking {SpeedyMarkov}"
author: "Sam Abbott"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Benchmarking {SpeedyMarkov}}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, comment = "#>",
  fig.width = 7, fig.height = 7, 
  fig.align = "center"
)
```



## Two state Markov model


```{r}
library(SpeedyMarkov)


duration <- 1000
samples <- 100000
```




```{r}
library(SpeedyMarkov)

# R SpeedyMarkov implementation
markov_ce_pipeline(example_two_state_markov(), duration = duration, samples = samples,
                   sim_type = "base")

# R SpeedyMarkov implementation + inner loop using Rcpp
markov_ce_pipeline(example_two_state_markov(), duration = duration, samples = samples,
                     sim_type = "armadillo_inner")

# R SpeedyMarkov implementation + markov sim using Rcpp
markov_ce_pipeline(example_two_state_markov(), duration = 100, samples = 100000,
                     sim_type = "armadillo_all")


# R SpeedyMarkov implementation + markov sim using Rcpp
markov_ce_pipeline(example_two_state_markov(), duration = 100, samples = 100000,
                     sim_type = "armadillo_all", map_fn = lapply)
```

